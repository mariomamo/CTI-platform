FROM public.ecr.aws/lambda/python:3.11

COPY code/requirements.txt ${LAMBDA_TASK_ROOT}

RUN pip install -r requirements.txt

COPY code ${LAMBDA_TASK_ROOT}
COPY contracts /opt

ENV AWS_LAMBDA_FUNCTION_NAME=cti_access

ENV PROD_ENDPOINT=localhost
ENV DOCUMENTDB_CONNECTION_STRING=mongodb://host.docker.internal:27017
ENV COLLECTION_NAME=CTIData
ENV DB_NAME=CTIDao
ENV ETHEREUM_NODE_URL=http://host.docker.internal:7545
ENV CTI_FACTORY_ADDRESS=0xed47A97C09AB99a57140f45beA86A985AB2b5843
ENV CTI_USER_ADDRESS=0xaA745EFDaf0C2eA6b74243D7b45fA4031Cd6581C
ENV CTI_ORACLE_ADDRESS=0x031F991B02d31D813039D4766850a8ac1a0F2d11
ENV CTI_TOKEN_ADDRESS=0x861d96eaB549102C67470ba8e324482025796483
ENV WALLET_PRIVATE_KEY=0x47733e072182f21edca0eaafa05d03566847e7af70dba0b67d79744bc41d3b4a
ENV KAFKA_BOOTSTRAP_SERVER=host.docker.internal:9092
ENV NOTIFICATION_TOPIC=cti.notification.events

CMD [ "cti_access_lambda.handler" ]